<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flight Radar</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <link rel="stylesheet" href="./flight-radar.css">

    <!-- Script for header and footer -->
    <script>
        $(function () {
            $("#header").load("/layouts/header.html");
            $("#footer").load("/layouts/footer.html");
        });
    </script>
</head>

<body>
    <div id="header"></div>

    

    <div class="container">
        <main class="py-5">
            <!-- This section is gonna redirect 
                  to the second page (flight page) once 
                  the user clicks on the search button a
                  ccordin with its flight number or route provided -->
            <section class="search-section">
                <!-- Hero content -->
                <h1 class="fw-bold text-start display-5" style="color: #4cacff !important; font-weight: 10;">Airhub
                    Flight Radar </h1>
                <p class="text-start mt-3" style="color: #6c757d;">Use Airhub Advanced API to track any flight in the
                    world. Stay informed about flight statuses, routes, and more!</p>

                    <div id="flightStatus" class="mb-5">
                        <h2>Flight Status</h2>
                        <p>Enter flight number:</p>
                        <input type="text" id="flightNumberInput">
                        <button id="trackFlightBtn" class="btn btn-lg btn-warning">Track Flight</button>
                        <div id="flightInfo"></div>
                      </div>
                      <script>
                        $(document).ready(function() {
                          $("#trackFlightBtn").click(function() {
                            var flightNumber = $("#flightNumberInput").val();
                            $.ajax({
                              url: "https://flightaware.com/commercial/flightxml/explorer/#op_FlightInfoStatus",
                              method: "GET",
                              data: { ident: flightNumber },
                              success: function(response) {
                                // Process the response and display flight status information
                                $("#flightInfo").html(response);
                              },
                              error: function(xhr, status, error) {
                                console.error("Error fetching flight status:", error);
                                $("#flightInfo").html("Error fetching flight status. Please try again later.");
                              }
                            });
                          });
                        });
                      </script>   
  
            </section>
              <!-- Flight Radar map -->
              <div id="map"></div>

         
            <!-- Real-time Worldwide Flight Traffic -->
            <section class="intro-paragraph mt-5">
                <div id="flightAlerts">
                    <h3>Flight Alerts</h3>
                    <p>Subscribe to receive flight alerts for specific flights or routes:</p>
                    <div class="form-group">
                        <label for="flightNumber">Flight Number:</label>
                        <input type="text" id="flightNumber" class="form-control" placeholder="Enter flight number">
                    </div>
                    <div class="form-group">
                        <label for="email">Email Address:</label>
                        <input type="email" id="email" class="form-control" placeholder="Enter your email">
                    </div>
                    <button id="subscribeBtn" class="btn btn-primary">Subscribe</button>
                    <div id="alertMessage" class="alert" role="alert"></div>
                </div>
                
            </section>


            <!-- Table for displaying flight arrival details -->
            <div id="flight-details" style="display: none;" class="mb-5">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Flight Number</th>
                            <th>Departure</th>
                            <th>Arrival</th>
                        </tr>
                    </thead>
                    <tbody id="flight-details-body">
                        <!-- Flight details rows will be dynamically added here -->
                        <tr>
                            <td colspan="5">Delayed Flights: None</td>
                        </tr>
                    </tbody>
                </table>
            </div>

    
        </main>
    </div>

    <div id="footer"></div>


<!-- <script type="module" src="/API/fetchFlightData.js"></script> -->
<script type="module" src="/API/leaflet.js"></script>

<script src="/API/flightSchdule.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>

    <script>
        $(document).ready(function() {
    $('#subscribeBtn').click(function() {
        var flightNumber = $('#flightNumber').val();
        var email = $('#email').val();

        // Simulate subscription (replace with actual API call)
        if (flightNumber && email) {
            // Subscription successful
            $('#alertMessage').removeClass('alert-danger').addClass('alert-success').text('Subscription successful. You will receive alerts for flight ' + flightNumber + '.').show();
        } else {
            // Validation error
            $('#alertMessage').removeClass('alert-success').addClass('alert-danger').text('Please enter a valid flight number and email address.').show();
        }
    });
});

    </script>


<
</body>

</html>